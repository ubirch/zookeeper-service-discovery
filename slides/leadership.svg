<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="762px" preserveAspectRatio="none" style="width:932px;height:762px;background:#FFFFFF;" version="1.1" viewBox="0 0 932 762" width="932px" zoomAndPan="magnify"><defs><filter height="300%" id="f1q3bh74939pou" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#A80036;stroke-width:1.0;" x1="367" x2="367" y1="40.2969" y2="162.8281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="367" x2="367" y1="162.8281" y2="203.6328"/><line style="stroke:#A80036;stroke-width:1.0;" x1="367" x2="367" y1="203.6328" y2="291.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="367" x2="367" y1="291.0313" y2="331.8359"/><line style="stroke:#A80036;stroke-width:1.0;" x1="367" x2="367" y1="331.8359" y2="485.5"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="367" x2="367" y1="485.5" y2="526.3047"/><line style="stroke:#A80036;stroke-width:1.0;" x1="367" x2="367" y1="526.3047" y2="668.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="367" x2="367" y1="668.8359" y2="709.6406"/><line style="stroke:#A80036;stroke-width:1.0;" x1="367" x2="367" y1="709.6406" y2="719.6406"/><line style="stroke:#A80036;stroke-width:1.0;" x1="568" x2="568" y1="40.2969" y2="162.8281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="568" x2="568" y1="162.8281" y2="203.6328"/><line style="stroke:#A80036;stroke-width:1.0;" x1="568" x2="568" y1="203.6328" y2="291.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="568" x2="568" y1="291.0313" y2="331.8359"/><line style="stroke:#A80036;stroke-width:1.0;" x1="568" x2="568" y1="331.8359" y2="485.5"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="568" x2="568" y1="485.5" y2="526.3047"/><line style="stroke:#A80036;stroke-width:1.0;" x1="568" x2="568" y1="526.3047" y2="668.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="568" x2="568" y1="668.8359" y2="709.6406"/><line style="stroke:#A80036;stroke-width:1.0;" x1="568" x2="568" y1="709.6406" y2="719.6406"/><line style="stroke:#A80036;stroke-width:1.0;" x1="762" x2="762" y1="40.2969" y2="162.8281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="762" x2="762" y1="162.8281" y2="203.6328"/><line style="stroke:#A80036;stroke-width:1.0;" x1="762" x2="762" y1="203.6328" y2="291.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="762" x2="762" y1="291.0313" y2="331.8359"/><line style="stroke:#A80036;stroke-width:1.0;" x1="762" x2="762" y1="331.8359" y2="485.5"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="762" x2="762" y1="485.5" y2="526.3047"/><line style="stroke:#A80036;stroke-width:1.0;" x1="762" x2="762" y1="526.3047" y2="668.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="762" x2="762" y1="668.8359" y2="709.6406"/><line style="stroke:#A80036;stroke-width:1.0;" x1="762" x2="762" y1="709.6406" y2="719.6406"/><rect fill="#99FF99" filter="url(#f1q3bh74939pou)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="126" x="302" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="309" y="24.9951">ServiceProvider</text><rect fill="#99FF99" filter="url(#f1q3bh74939pou)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="126" x="302" y="718.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="309" y="738.6357">ServiceProvider</text><rect fill="#FFD966" filter="url(#f1q3bh74939pou)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="520" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="527" y="24.9951">Zookeeper</text><rect fill="#FFD966" filter="url(#f1q3bh74939pou)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="520" y="718.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="527" y="738.6357">Zookeeper</text><rect fill="#99FF99" filter="url(#f1q3bh74939pou)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="142" x="689" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="696" y="24.9951">ServiceProvider_2</text><rect fill="#99FF99" filter="url(#f1q3bh74939pou)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="142" x="689" y="718.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="696" y="738.6357">ServiceProvider_2</text><polygon fill="#A80036" points="556,67.4297,566,71.4297,556,75.4297,560,71.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="367" x2="562" y1="71.4297" y2="71.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="374" y="66.3638">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="387" y="66.3638">creates connection</text><polygon fill="#A80036" points="556,96.5625,566,100.5625,556,104.5625,560,100.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="367" x2="562" y1="100.5625" y2="100.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="374" y="95.4966">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="387" y="95.4966">registers itself</text><polygon fill="#A80036" points="556,138.2617,566,142.2617,556,146.2617,560,142.2617" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="367" x2="562" y1="142.2617" y2="142.2617"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="374" y="137.1958">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="387" y="137.1958">offers itself to be leader</text><path d="M5,113.5625 L5,153.5625 L358,153.5625 L358,123.5625 L348,113.5625 L5,113.5625 " fill="#FBFB77" filter="url(#f1q3bh74939pou)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M348,113.5625 L348,123.5625 L358,123.5625 L348,113.5625 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="332" x="11" y="130.6294">Both service providers offer the same functionality</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228" x="11" y="145.7622">They represent different instances.</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="566.5" y="187.0386"/><polygon fill="#A80036" points="579,220.7656,569,224.7656,579,228.7656,575,224.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="573" x2="761" y1="224.7656" y2="224.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="585" y="219.6997">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="598" y="219.6997">creates connection</text><polygon fill="#A80036" points="579,249.8984,569,253.8984,579,257.8984,575,253.8984" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="573" x2="761" y1="253.8984" y2="253.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="585" y="248.8325">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="598" y="248.8325">registers itself</text><polygon fill="#A80036" points="579,279.0313,569,283.0313,579,287.0313,575,283.0313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="573" x2="761" y1="283.0313" y2="283.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="585" y="277.9653">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="598" y="277.9653">offers itself to be leader</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="566.5" y="315.2417"/><polygon fill="#A80036" points="378,369.1016,368,373.1016,378,377.1016,374,373.1016" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="372" x2="567" y1="373.1016" y2="373.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="384" y="368.0356">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="397" y="368.0356">Receives leadership</text><path d="M98,336.8359 L98,391.8359 L358,391.8359 L358,346.8359 L348,336.8359 L98,336.8359 " fill="#FBFB77" filter="url(#f1q3bh74939pou)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M348,336.8359 L348,346.8359 L358,346.8359 L348,336.8359 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="104" y="353.9028">Note that the leadership is kept until</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="104" y="369.0356">the leader decides to relinquish, or</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="104" y="384.1685">because stops serving.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="367" x2="409" y1="422.3672" y2="422.3672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="409" x2="409" y1="422.3672" y2="435.3672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="368" x2="409" y1="435.3672" y2="435.3672"/><polygon fill="#A80036" points="378,431.3672,368,435.3672,378,439.3672,374,435.3672" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="374" y="417.3013">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="387" y="417.3013">Runs leader process</text><line style="stroke:#A80036;stroke-width:1.0;" x1="762" x2="804" y1="464.5" y2="464.5"/><line style="stroke:#A80036;stroke-width:1.0;" x1="804" x2="804" y1="464.5" y2="477.5"/><line style="stroke:#A80036;stroke-width:1.0;" x1="763" x2="804" y1="477.5" y2="477.5"/><polygon fill="#A80036" points="773,473.5,763,477.5,773,481.5,769,477.5" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="769" y="459.4341">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="782" y="459.4341">Runs follower process</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="566.5" y="509.7104"/><polygon fill="#A80036" points="556,543.4375,566,547.4375,556,551.4375,560,547.4375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="367" x2="562" y1="547.4375" y2="547.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="374" y="542.3716">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="396" y="542.3716">Relinquishes leadership</text><polygon fill="#A80036" points="750,572.5703,760,576.5703,750,580.5703,754,576.5703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="568" x2="756" y1="576.5703" y2="576.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="575" y="571.5044">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="597" y="571.5044">Receives leadership</text><line style="stroke:#A80036;stroke-width:1.0;" x1="762" x2="804" y1="605.7031" y2="605.7031"/><line style="stroke:#A80036;stroke-width:1.0;" x1="804" x2="804" y1="605.7031" y2="618.7031"/><line style="stroke:#A80036;stroke-width:1.0;" x1="763" x2="804" y1="618.7031" y2="618.7031"/><polygon fill="#A80036" points="773,614.7031,763,618.7031,773,622.7031,769,618.7031" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="769" y="600.6372">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="791" y="600.6372">Runs leader process</text><line style="stroke:#A80036;stroke-width:1.0;" x1="367" x2="409" y1="647.8359" y2="647.8359"/><line style="stroke:#A80036;stroke-width:1.0;" x1="409" x2="409" y1="647.8359" y2="660.8359"/><line style="stroke:#A80036;stroke-width:1.0;" x1="368" x2="409" y1="660.8359" y2="660.8359"/><polygon fill="#A80036" points="378,656.8359,368,660.8359,378,664.8359,374,660.8359" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="374" y="642.77">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="396" y="642.77">Runs follower process</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="566.5" y="693.0464"/><!--MD5=[4e0fdcafbdfb220a4de17e9a4247689b]
@startuml
'https://plantuml.com/sequence-diagram

autonumber

participant ServiceProvider #99FF99
participant Zookeeper #ffd966
participant ServiceProvider_2 #99FF99

ServiceProvider -> Zookeeper: creates connection
ServiceProvider -> Zookeeper: registers itself
ServiceProvider -> Zookeeper: offers itself to be leader
note left
    Both service providers offer the same functionality
    They represent different instances.
end note
... ...
ServiceProvider_2 -> Zookeeper: creates connection
ServiceProvider_2 -> Zookeeper: registers itself
ServiceProvider_2 -> Zookeeper: offers itself to be leader
... ...
Zookeeper -> ServiceProvider: Receives leadership
note left
    Note that the leadership is kept until
    the leader decides to relinquish, or
    because stops serving.
end note
ServiceProvider -> ServiceProvider: Runs leader process
ServiceProvider_2 -> ServiceProvider_2: Runs follower process
... ...
ServiceProvider -> Zookeeper: Relinquishes leadership
Zookeeper -> ServiceProvider_2: Receives leadership
ServiceProvider_2 -> ServiceProvider_2: Runs leader process
ServiceProvider -> ServiceProvider: Runs follower process
... ...

@enduml

@startuml

autonumber

participant ServiceProvider #99FF99
participant Zookeeper #ffd966
participant ServiceProvider_2 #99FF99

ServiceProvider -> Zookeeper: creates connection
ServiceProvider -> Zookeeper: registers itself
ServiceProvider -> Zookeeper: offers itself to be leader
note left
    Both service providers offer the same functionality
    They represent different instances.
end note
... ...
ServiceProvider_2 -> Zookeeper: creates connection
ServiceProvider_2 -> Zookeeper: registers itself
ServiceProvider_2 -> Zookeeper: offers itself to be leader
... ...
Zookeeper -> ServiceProvider: Receives leadership
note left
    Note that the leadership is kept until
    the leader decides to relinquish, or
    because stops serving.
end note
ServiceProvider -> ServiceProvider: Runs leader process
ServiceProvider_2 -> ServiceProvider_2: Runs follower process
... ...
ServiceProvider -> Zookeeper: Relinquishes leadership
Zookeeper -> ServiceProvider_2: Receives leadership
ServiceProvider_2 -> ServiceProvider_2: Runs leader process
ServiceProvider -> ServiceProvider: Runs follower process
... ...

@enduml

PlantUML version 1.2022.1(Tue Feb 01 19:19:58 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>